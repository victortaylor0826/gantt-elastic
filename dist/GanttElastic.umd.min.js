!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.GanttElastic=e():t.GanttElastic=e()}(window,function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=6)}([function(t,e,s){t.exports=function(){"use strict";var t="millisecond",e="second",s="minute",i="hour",r="day",a="week",o="month",n="year",l=/^(\d{4})-?(\d{1,2})-?(\d{0,2})(.*?(\d{1,2}):(\d{1,2}):(\d{1,2}))?.?(\d{1,3})?$/,h=/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},d=function(t,e,s){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(s)+t},u={padStart:d,padZoneStr:function(t){var e=Math.abs(t),s=Math.floor(e/60),i=e%60;return(t<=0?"+":"-")+d(s,2,"0")+":"+d(i,2,"0")},monthDiff:function(t,e){var s=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(s,"months"),r=e-i<0,a=t.clone().add(s+(r?-1:1),"months");return Number(-(s+(e-i)/(r?i-a:a-i)))},absFloor:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},prettyUnit:function(l){return{M:o,y:n,w:a,d:r,h:i,m:s,s:e,ms:t}[l]||String(l||"").toLowerCase().replace(/s$/,"")},isUndefined:function(t){return void 0===t}},p="en",m={};m[p]=c;var f=function(t){return t instanceof k},g=function(t,e,s){var i;if(!t)return null;if("string"==typeof t)m[t]&&(i=t),e&&(m[t]=e,i=t);else{var r=t.name;m[r]=t,i=r}return s||(p=i),i},w=function(t,e){if(f(t))return t.clone();var s=e||{};return s.date=t,new k(s)},y=function(t,e){return w(t,{locale:e.$L})},v=u;v.parseLocale=g,v.isDayjs=f,v.wrapper=y;var k=function(){function c(t){this.parse(t)}var d=c.prototype;return d.parse=function(t){var e,s;this.$d=null===(e=t.date)?new Date(NaN):v.isUndefined(e)?new Date:e instanceof Date?e:"string"==typeof e&&/.*[^Z]$/i.test(e)&&(s=e.match(l))?new Date(s[1],s[2]-1,s[3]||1,s[5]||0,s[6]||0,s[7]||0,s[8]||0):new Date(e),this.init(t)},d.init=function(t){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds(),this.$L=this.$L||g(t.locale,null,!0)||p},d.$utils=function(){return v},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(t,e){var s=w(t);return this.startOf(e)<=s&&s<=this.endOf(e)},d.isAfter=function(t,e){return w(t)<this.startOf(e)},d.isBefore=function(t,e){return this.endOf(e)<w(t)},d.year=function(){return this.$y},d.month=function(){return this.$M},d.day=function(){return this.$W},d.date=function(){return this.$D},d.hour=function(){return this.$H},d.minute=function(){return this.$m},d.second=function(){return this.$s},d.millisecond=function(){return this.$ms},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,l){var h=this,c=!!v.isUndefined(l)||l,d=function(t,e){var s=y(new Date(h.$y,e,t),h);return c?s:s.endOf(r)},u=function(t,e){return y(h.toDate()[t].apply(h.toDate(),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),h)};switch(v.prettyUnit(t)){case n:return c?d(1,0):d(31,11);case o:return c?d(1,this.$M):d(0,this.$M+1);case a:return d(c?this.$D-this.$W:this.$D+(6-this.$W),this.$M);case r:case"date":return u("setHours",0);case i:return u("setMinutes",1);case s:return u("setSeconds",2);case e:return u("setMilliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(a,l){var h,c=v.prettyUnit(a),d=(h={},h[r]="setDate",h.date="setDate",h[o]="setMonth",h[n]="setFullYear",h[i]="setHours",h[s]="setMinutes",h[e]="setSeconds",h[t]="setMilliseconds",h)[c],u=c===r?this.$D+(l-this.$W):l;return this.$d[d]&&this.$d[d](u),this.init(),this},d.set=function(t,e){return this.clone().$set(t,e)},d.add=function(t,l){var h,c=this;t=Number(t);var d=v.prettyUnit(l),u=function(e,s){var i=c.set("date",1).set(e,s+t);return i.set("date",Math.min(c.$D,i.daysInMonth()))},p=function(e){var s=new Date(c.$d);return s.setDate(s.getDate()+e*t),y(s,c)};if(d===o)return u(o,this.$M);if(d===n)return u(n,this.$y);if(d===r)return p(1);if(d===a)return p(7);var m=(h={},h[s]=6e4,h[i]=36e5,h[e]=1e3,h)[d]||1,f=this.valueOf()+t*m;return y(f,this)},d.subtract=function(t,e){return this.add(-1*t,e)},d.format=function(t){var e=this,s=t||"YYYY-MM-DDTHH:mm:ssZ",i=v.padZoneStr(this.$d.getTimezoneOffset()),r=this.$locale(),a=r.weekdays,o=r.months,n=function(t,e,s,i){return t&&t[e]||s[e].substr(0,i)},l=function(t){return 0===e.$H?12:v.padStart(e.$H<13?e.$H:e.$H-12,"hh"===t?2:1,"0")};return s.replace(h,function(t){return t.indexOf("[")>-1?t.replace(/\[|\]/g,""):{YY:String(e.$y).slice(-2),YYYY:String(e.$y),M:String(e.$M+1),MM:v.padStart(e.$M+1,2,"0"),MMM:n(r.monthsShort,e.$M,o,3),MMMM:o[e.$M],D:String(e.$D),DD:v.padStart(e.$D,2,"0"),d:String(e.$W),dd:n(r.weekdaysMin,e.$W,a,2),ddd:n(r.weekdaysShort,e.$W,a,3),dddd:a[e.$W],H:String(e.$H),HH:v.padStart(e.$H,2,"0"),h:l(t),hh:l(t),a:e.$H<12?"am":"pm",A:e.$H<12?"AM":"PM",m:String(e.$m),mm:v.padStart(e.$m,2,"0"),s:String(e.$s),ss:v.padStart(e.$s,2,"0"),SSS:v.padStart(e.$ms,3,"0"),Z:i}[t]||i.replace(":","")})},d.diff=function(t,l,h){var c,d=v.prettyUnit(l),u=w(t),p=this-u,m=v.monthDiff(this,u);return m=(c={},c[n]=m/12,c[o]=m,c.quarter=m/3,c[a]=p/6048e5,c[r]=p/864e5,c[i]=p/36e5,c[s]=p/6e4,c[e]=p/1e3,c)[d]||p,h?m:v.absFloor(m)},d.daysInMonth=function(){return this.endOf(o).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,e){var s=this.clone();return s.$L=g(t,e,!0),s},d.clone=function(){return y(this.toDate(),this)},d.toDate=function(){return new Date(this.$d)},d.toArray=function(){return[this.$y,this.$M,this.$D,this.$H,this.$m,this.$s,this.$ms]},d.toJSON=function(){return this.toISOString()},d.toISOString=function(){return this.$d.toISOString()},d.toObject=function(){return{years:this.$y,months:this.$M,date:this.$D,hours:this.$H,minutes:this.$m,seconds:this.$s,milliseconds:this.$ms}},d.toString=function(){return this.$d.toUTCString()},c}();return w.extend=function(t,e){return t(e,k,w),w},w.locale=g,w.isDayjs=f,w.unix=function(t){return w(1e3*t)},w.en=m[p],w}()},function(t,e,s){var i=s(4);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,s(7).default)("c3e5085c",i,!1,{})},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var s=function(t,e){var s=t[1]||"",i=t[3];if(!i)return s;if(e&&"function"==typeof btoa){var r=(o=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),a=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[s].concat(a).concat([r]).join("\n")}var o;return[s].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+s+"}":s}).join("")},e.i=function(t,s){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&i[o[0]]||(s&&!o[2]?o[2]=s:s&&(o[2]="("+o[2]+") and ("+s+")"),e.push(o))}},e}},function(t,e,s){"use strict";var i=s(1);s.n(i).a},function(t,e,s){(e=t.exports=s(2)(!1)).i(s(5),""),e.push([t.i,"\r\n",""])},function(t,e,s){(t.exports=s(2)(!1)).push([t.i,".gantt-elastic__main-view svg{\n  display: block;\n}\n.gantt-elastic__grid-horizontal-line, .gantt-elastic__grid-vertical-line{\n  stroke: #a0a0a0;\n  stroke-width: 1;\n}\nforeignObject > *{\n  margin: 0px;\n}\n.gantt-elastic .p-2{\n  padding: 10rem;\n}\n.gantt-elastic__main-view-svg-container , .gantt-elastic__main-view-container{\n  overflow: hidden;\n  max-width:100%;\n}\n.gantt-elastic__task-list-header-column:last-of-type{\n  border-right: 1px solid #00000050;\n}\n.gantt-elastic__task-list-item:last-of-type{\n  border-bottom:1px solid #00000050;\n}\n.gantt-elastic__task-list-item-value-wrapper:hover {\n  overflow: visible !important;\n}\n.gantt-elastic__task-list-item-value-wrapper:hover > .gantt-elastic__task-list-item-value-container{\n  position: relative;\n  overflow: visible !important;\n}\n.gantt-elastic__task-list-item-value-wrapper:hover > .gantt-elastic__task-list-item-value{\n  position: absolute;\n}\n",""])},function(t,e,s){"use strict";s.r(e);var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gantt-elastic"},[this._t("header"),this._v(" "),e("main-view",{attrs:{tasks:this.tasks,options:this.options}}),this._v(" "),this._t("footer")],2)};i._withStripped=!0;var r=s(0),a=s.n(r),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gantt-elastic__main-view",style:t.root.style("main-view")},[s("div",{staticClass:"gantt-elastic__svg-container-wrapper",style:t.root.style("svg-container-wrapper",{height:t.root.state.height+"px"})},[s("svg",{ref:"svgMainView",staticClass:"gantt-elastic__svg-container",style:t.root.style("svg-container",{"max-width":"calc(100% - "+t.root.state.scrollBarHeight+"px)"}),attrs:{width:t.getWidth,height:t.root.state.height,xmlns:"http://www.w3.org/2000/svg"}},[s("foreignObject",{attrs:{x:"0",y:"0",width:"100%",height:"100%"}},[s("div",{staticClass:"gantt-elastic__container",style:t.root.style("container"),attrs:{xmlns:"http://www.w3.org/1999/xhtml"},on:{mousemove:t.mouseMove,mouseup:t.mouseUp}},[s("div",{staticClass:"gantt-elastic__task-list-container"},[s("svg",{directives:[{name:"show",rawName:"v-show",value:t.root.state.taskList.display&&t.root.state.taskList.displayAfterResize,expression:"root.state.taskList.display && root.state.taskList.displayAfterResize"}],ref:"svgTaskList",staticClass:"gantt-elastic__task-list-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:t.root.state.taskList.finalWidth,height:t.root.state.height}},[s("defs",{domProps:{innerHTML:t._s(t.defs)}}),t._v(" "),s("task-list")],1)]),t._v(" "),s("div",{ref:"svgChartContainer",staticClass:"gantt-elastic__main-view-container",on:{mousedown:t.chartMouseDown,touchstart:t.chartMouseDown,mouseup:t.chartMouseUp,touchend:t.chartMouseUp,mousemove:function(e){return e.preventDefault(),t.chartMouseMove(e)},touchmove:function(e){return e.preventDefault(),t.chartMouseMove(e)},wheel:function(e){return e.preventDefault(),t.chartWheel(e)}}},[s("chart")],1)])])],1),t._v(" "),s("div",{ref:"chartScrollContainerVertical",staticClass:"gantt-elastic__chart-scroll-container gantt-elastic__chart-scroll-container--vertical",style:t.root.style("chart-scroll-container","chart-scroll-container--vertical",t.verticalStyle),on:{scroll:t.onVerticalScroll}},[s("div",{staticClass:"gantt-elastic__chart-scroll--vertical",style:{width:"1px",height:t.root.state.allVisibleTasksHeight+"px"}})])]),t._v(" "),s("div",{ref:"chartScrollContainerHorizontal",staticClass:"gantt-elastic__chart-scroll-container gantt-elastic__chart-scroll-container--horizontal",style:t.root.style("chart-scroll-container","chart-scroll-container--horizontal",{marginLeft:t.getMarginLeft}),on:{scroll:t.onHorizontalScroll}},[s("div",{staticClass:"gantt-elastic__chart-scroll--horizontal",style:{height:"1px",width:t.root.state.width+"px"}})])])};o._withStripped=!0;var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("foreignObject",{directives:[{name:"show",rawName:"v-show",value:t.root.state.taskList.display&&t.root.state.taskList.displayAfterResize,expression:"root.state.taskList.display && root.state.taskList.displayAfterResize"}],ref:"taskListWrapper",staticClass:"gantt-elastic__task-list-wrapper",style:t.root.style("task-list-wrapper"),attrs:{x:"0",y:"0",width:"100%",height:"100%"}},[s("div",{ref:"taskList",staticClass:"gantt-elastic__task-list",style:t.root.style("task-list"),attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[s("task-list-header"),t._v(" "),s("div",{ref:"taskListItems",staticClass:"gantt-elastic__task-list-items",style:t.root.style("task-list-items",{height:t.root.state.rowsHeight+"px"})},t._l(t.root.state.tasks,function(e){return s("task-list-item",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"task.visible"}],key:e.id,attrs:{task:e,"expander-style":t.getListExpanderStyle(e)}})}))],1)])};n._withStripped=!0;var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gantt-elastic__task-list-header",style:t.root.style("task-list-header")},t._l(t.root.state.taskList.columns,function(e){return s("div",{key:e._id,staticClass:"gantt-elastic__task-list-header-column",style:t.root.style("task-list-header-column",e.style["task-list-header-column"],t.getStyle(e))},[e.expander?s("task-list-expander",{attrs:{tasks:t.collapsible}}):t._e(),t._v(" "),s("div",{staticClass:"gantt-elastic__task-list-header-label",style:t.root.style("task-list-header-label",e.style["task-list-header-label"]),attrs:{column:e},on:{mouseup:t.resizerMouseUp}},[t._v(t._s(e.label))]),t._v(" "),s("div",{staticClass:"gantt-elastic__task-list-header-resizer-wrapper",style:t.root.style("task-list-header-resizer-wrapper",e.style["task-list-header-resizer-wrapper"]),attrs:{column:e},on:{mousedown:function(s){t.resizerMouseDown(s,e)}}},[s("div",{staticClass:"gantt-elastic__task-list-header-resizer",style:t.root.style("task-list-header-resizer",e.style["task-list-header-resizer"])},[s("div",{staticClass:"gantt-elastic__task-list-header-resizer-dot",style:t.root.style("task-list-header-resizer-dot",e.style["task-list-header-resizer-dot"])}),t._v(" "),s("div",{staticClass:"gantt-elastic__task-list-header-resizer-dot",style:t.root.style("task-list-header-resizer-dot",e.style["task-list-header-resizer-dot"])}),t._v(" "),s("div",{staticClass:"gantt-elastic__task-list-header-resizer-dot",style:t.root.style("task-list-header-resizer-dot",e.style["task-list-header-resizer-dot"])})])])],1)}))};l._withStripped=!0;var h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gantt-elastic__task-list-column-expander-wrapper",style:t.root.style("task-list-column-expander-wrapper")},[s("svg",{staticClass:"gantt-elastic__task-list-column-expander-content",style:t.root.style("task-list-column-expander-content"),attrs:{width:t.root.state.taskList.expander.size,height:t.root.state.taskList.expander.size}},[t.allChildren.length?s("rect",{staticClass:"gantt-elastic__task-list-column-expander-border",style:t.root.style("task-list-column-expander-border",t.borderStyle),attrs:{x:t.border,y:t.border,width:t.root.state.taskList.expander.size-2*t.border,height:t.root.state.taskList.expander.size-2*t.border,rx:"2",ry:"2"},on:{click:t.toggle}}):t._e(),t._v(" "),t.allChildren.length?s("line",{staticClass:"gantt-elastic__task-list-column-expander-line",style:t.root.style("task-list-column-expander-line"),attrs:{x1:t.lineOffset,y1:t.root.state.taskList.expander.size/2,x2:t.root.state.taskList.expander.size-t.lineOffset,y2:t.root.state.taskList.expander.size/2},on:{click:t.toggle}}):t._e(),t._v(" "),t.collapsed?s("line",{staticClass:"gantt-elastic__task-list-column-expander-line",style:t.root.style("task-list-column-expander-line"),attrs:{x1:t.root.state.taskList.expander.size/2,y1:t.lineOffset,x2:t.root.state.taskList.expander.size/2,y2:t.root.state.taskList.expander.size-t.lineOffset},on:{click:t.toggle}}):t._e()])])};function c(t,e,s,i,r,a,o,n){var l,h="function"==typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=s,h._compiled=!0),i&&(h.functional=!0),a&&(h._scopeId="data-v-"+a),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=l):r&&(l=n?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(h.functional){h._injectStyles=l;var c=h.render;h.render=function(t,e){return l.call(e),c(t,e)}}else{var d=h.beforeCreate;h.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:h}}h._withStripped=!0;var d=c({inject:["root"],props:["tasks"],data:()=>({border:.5,borderStyle:{"stroke-width":.5},lineOffset:5}),computed:{allChildren(){const t=[];return this.tasks.forEach(e=>{e.allChildren.forEach(e=>{t.push(e)})}),t},collapsed(){if(0===this.tasks.length)return!1;let t=0;for(let e=0,s=this.tasks.length;e<s;e++)this.tasks[e].collapsed&&t++;return t===this.tasks.length}},methods:{toggle(){if(0===this.allChildren.length)return;const t=!this.collapsed;this.tasks.forEach(e=>{e.collapsed=t,e.allChildren.forEach(e=>{e.visible=!t&&!e.parent.collapsed})})}}},h,[],!1,null,null,null);d.options.__file="src/components/TaskList/Expander.vue";var u=d.exports,p=c({components:{TaskListExpander:u},inject:["root"],data:()=>({resizer:{moving:!1,x:0}}),computed:{getStyle(){return t=>{const e=this.root.state;return{height:e.calendar.height+this.root.style("calendar-row")["stroke-width"]+"px","margin-bottom":e.calendar.gap+"px",width:t.finalWidth+"px"}}},collapsible(){return this.root.state.tasks.filter(t=>t.allChildren.length>0)}},methods:{resizerMouseDown(t,e){this.resizerMoving||(this.resizer.moving=e,this.resizer.x=t.clientX,this.resizer.initialWidth=e.width,this.root.$emit("taskList-column-width-change-start",this.resizer.moving))},resizerMouseMove(t){this.resizer.moving&&(this.resizer.moving.width=this.resizer.initialWidth+t.clientX-this.resizer.x,this.resizer.moving.width<this.root.state.taskList.minWidth&&(this.resizer.moving.width=this.root.state.taskList.minWidth),this.root.$emit("taskList-column-width-change",this.resizer.moving))},resizerMouseUp(t){this.resizer.moving&&(this.root.$emit("taskList-column-width-change",this.resizer.moving),this.root.$emit("taskList-column-width-change-stop",this.resizer.moving),this.resizer.moving=!1)}},created(){this.mouseUpListener=document.addEventListener("mouseup",t=>{this.resizerMouseUp(t)}),this.mouseMoveListener=document.addEventListener("mousemove",t=>{this.resizerMouseMove(t)}),this.root.$on("main-view-mousemove",this.resizerMouseMove),this.root.$on("main-view-mouseup",this.resizerMouseUp)}},l,[],!1,null,null,null);p.options.__file="src/components/TaskList/TaskListHeader.vue";var m=p.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gantt-elastic__task-list-item",style:t.root.style("task-list-item")},t._l(t.root.state.taskList.columns,function(e){return s("item-column",{key:e._id,attrs:{column:e,task:t.task}},[e.expander?s("task-list-expander",{style:t.expanderStyle,attrs:{tasks:[t.task]}}):t._e()],1)}))};f._withStripped=!0;var g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gantt-elastic__task-list-item-column",style:t.root.style("task-list-item-column",t.column.style["task-list-item-column"],{width:t.column.finalWidth+"px",height:t.column.height+"px"})},[s("div",{staticClass:"gantt-elastic__task-list-item-value-wrapper",style:t.root.style("task-list-item-value-wrapper",t.column.style["task-list-item-value-wrapper"])},[t._t("default"),t._v(" "),s("div",{staticClass:"gantt-elastic__task-list-item-value-container",style:t.root.style("task-list-item-value-container",t.column.style["task-list-item-value-container"])},[t.html?t._e():s("div",{staticClass:"gantt-elastic__task-list-item-value",style:t.root.style("task-list-item-value",t.column.style["task-list-item-value"])},[t._v(t._s(t.value))]),t._v(" "),t.html?s("div",{staticClass:"gantt-elastic__task-list-item-value",style:t.root.style("task-list-item-value",t.column.style["task-list-item-value"]),domProps:{innerHTML:t._s(t.value)}}):t._e()])],2)])};g._withStripped=!0;var w=c({inject:["root"],props:["column","task"],data:()=>({}),computed:{html(){return void 0!==this.column.html&&!0===this.column.html},value(){return"function"==typeof this.column.value?this.column.value(this.task):this.task[this.column.value]}}},g,[],!1,null,null,null);w.options.__file="src/components/TaskList/ItemColumn.vue";var y=c({components:{TaskListExpander:u,ItemColumn:w.exports},inject:["root"],props:["task","expanderStyle"],data:()=>({})},f,[],!1,null,null,null);y.options.__file="src/components/TaskList/TaskListItem.vue";var v=c({components:{TaskListHeader:m,TaskListItem:y.exports},inject:["root"],data:()=>({}),mounted(){this.root.state.refs.taskListWrapper=this.$refs.taskListWrapper,this.root.state.refs.taskList=this.$refs.taskList,this.root.state.refs.taskListItems=this.$refs.taskListItems},computed:{getListExpanderStyle(){return t=>{const e=this.root.state;return{"padding-left":(t.parents.length-1)*e.taskList.expander.padding+e.taskList.expander.margin+"px",margin:"auto 0px"}}}}},n,[],!1,null,null,null);v.options.__file="src/components/TaskList/TaskList.vue";var k=v.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{ref:"chart",staticClass:"gantt-elastic__chart",style:t.root.style("chart"),attrs:{x:"0",y:"0",width:t.getWidth+"px",height:t.getHeight+"px",xmlns:"http://www.w3.org/2000/svg"}},[s("calendar"),t._v(" "),s("foreignObject",{attrs:{x:"0",y:t.root.getCalendarHeight(),width:"100%",height:t.root.state.rowsHeight}},[s("div",{ref:"chartGraph",staticClass:"gantt-elastic__chart-graph",style:t.root.style("chart-graph",{height:"100%"}),attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[s("svg",{ref:"chart",staticClass:"gantt-elastic__chart",style:t.root.style("chart"),attrs:{x:"0",y:"0",width:t.getWidth+"px",height:t.root.state.allVisibleTasksHeight+"px",viewBox:t.getViewBox,xmlns:"http://www.w3.org/2000/svg"}},[s("grid"),t._v(" "),s("dependency-lines",{attrs:{tasks:t.root.state.tasks}}),t._v(" "),t._l(t.root.state.tasks,function(e){return s("g",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"task.visible"}],key:e.id,staticClass:"gantt-elastic__chart-row-wrapper",style:t.root.style("chart-row-wrapper"),attrs:{task:e}},[s(e.type,{tag:"component",attrs:{task:e}})],1)})],2)])])],1)};x._withStripped=!0;var _=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{ref:"chart",staticClass:"gantt-elastic__grid-lines-wrapper",style:t.root.style("grid-lines-wrapper"),attrs:{x:"0",y:"0",width:t.root.state.width,height:t.root.state.allVisibleTasksHeight,xmlns:"http://www.w3.org/2000/svg"}},[s("g",{staticClass:"gantt-elastic__grid-lines",style:t.root.style("grid-lines")},[t._l(t.horizontalLines,function(e){return s("line",{key:e.key,staticClass:"gantt-elastic__grid-line-horizontal",style:t.root.style("grid-line-horizontal"),attrs:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}})}),t._v(" "),t._l(t.verticalLines,function(e){return s("line",{key:e.key,staticClass:"gantt-elastic__grid-line-vertical",style:t.root.style("grid-line-vertical"),attrs:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}})}),t._v(" "),s("line",{staticClass:"gantt-elastic__grid-line-time",style:t.root.style("grid-line-time"),attrs:{x1:t.timeLinePosition.x,y1:t.timeLinePosition.y1,x2:t.timeLinePosition.x,y2:t.timeLinePosition.y2}})],2)])};_._withStripped=!0;var $=c({inject:["root"],data:()=>({}),created(){this.root.$on("recenterPosition",this.recenterPosition)},mounted(){this.$nextTick(()=>{this.$nextTick(()=>{this.root.scrollToTime(this.timeLinePosition.time)})})},methods:{recenterPosition(){this.root.scrollToTime(this.timeLinePosition.time)}},computed:{verticalLines(){let t=[];const e=this.root.state;return e.times.steps.forEach(s=>{this.root.isInsideViewPort(s.offset.px,1)&&t.push({key:s.date.valueOf(),x1:s.offset.px,y1:0,x2:s.offset.px,y2:e.tasks.length*(e.row.height+2*e.grid.horizontal.gap)+this.root.style("grid-line-vertical")["stroke-width"]})}),t},horizontalLines(){let t=[];const e=this.root.state;for(let s=0,i=this.root.visibleTasks.length;s<=i;s++){const i=s*(e.row.height+2*e.grid.horizontal.gap)+this.root.style("grid-line-vertical")["stroke-width"]/2;t.push({key:"hl"+s,x1:0,y1:i,x2:"100%",y2:i})}return t},inViewPort(){return t=>{const e=this.root.state;return t.x1>=e.scroll.chart.left&&t.x1<=e.scroll.chart.right}},timeLinePosition(){const t=new Date,e=t.getTime(),s=this.root.timeToPixelOffsetX(e),i={x:0,y1:0,y2:"100%",dateTime:"",time:e};return i.x=s,i.dateTime=t.toLocaleDateString(),i}}},_,[],!1,null,null,null);$.options.__file="src/components/Chart/Grid.vue";var b=$.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("g",{staticClass:"gantt-elastic__calendar-wrapper",style:t.root.style("calendar-wrapper")},[s("foreignObject",{attrs:{x:t.getX,y:t.getY,width:t.getWidth,height:t.root.state.calendar.height}},[s("div",{staticClass:"gantt-elastic__calendar",style:t.root.style("calendar"),attrs:{xmlns:"http://www.w3.org/1999/xhtml"}})]),t._v(" "),t._l(t.generateMonths,function(t){return s("calendar-row",{key:t.key,staticClass:"gantt-elastic__calendar-row--month",attrs:{item:t,which:"month"}})}),t._v(" "),t._l(t.generateDays,function(t){return s("calendar-row",{key:t.key,staticClass:"gantt-elastic__calendar-row--day",attrs:{item:t,which:"day"}})}),t._v(" "),t._l(t.generateHours,function(t){return s("calendar-row",{key:t.key,staticClass:"gantt-elastic__calendar-row--hour",attrs:{item:t,which:"hour"}})})],2)};C._withStripped=!0;var T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.root.state.calendar[t.which].display?s("g",{staticClass:"gantt-elastic__calendar-row",style:t.root.style("calendar-row")},[s("rect",{class:"gantt-elastic__calendar-row-rect--"+t.which,style:t.root.style("calendar-row-rect--"+t.which),attrs:{x:t.item.x,y:t.item.y,width:t.item.width,height:t.item.height}}),t._v(" "),s("text",{class:"gantt-elastic__calendar-row-text--"+t.which,style:t.root.style("calendar-row-text--"+t.which),attrs:{x:t.getTextX,y:t.getTextY,"alignment-baseline":"middle","text-anchor":t.anchor}},[t._v(t._s(t.item.label))])]):t._e()};T._withStripped=!0;var L=c({inject:["root"],props:["item","which"],data:()=>({anchor:"middle"}),computed:{getTextX(){let t=this.item.x+this.item.width/2;if("month"===this.which&&this.root.isInsideViewPort(this.item.x,this.item.width,0)){this.anchor="start";let e=this.root.state.scroll.chart.right-this.root.state.scroll.chart.left;(t=this.root.state.scroll.chart.left+e/2-this.item.textWidth/2+2)+this.item.textWidth+2>this.item.x+this.item.width?t=this.item.x+this.item.width-this.item.textWidth-2:t<this.item.x&&(t=this.item.x+2)}return t},getTextY(){return this.item.y+this.item.height/2}}},T,[],!1,null,null,null);L.options.__file="src/components/Calendar/CalendarRow.vue";var M=c({components:{CalendarRow:L.exports},inject:["root"],data:()=>({}),methods:{howManyHoursFit(t){const e=this.root.style("calendar-row")["stroke-width"]+2;let s=this.root.state.times.steps[t].width.px,i=Object.keys(this.root.state.calendar.hour.format);for(let t=24;t>1;t=Math.ceil(t/2))for(let r of i)if((this.root.state.calendar.hour.maxWidths[r]+e)*t<=s&&t>1)return{count:t,type:r};return{count:0,type:""}},howManyDaysFit(){const t=this.root.style("calendar-row")["stroke-width"]+2;let e=this.root.state.width,s=Object.keys(this.root.state.calendar.day.format);for(let i=this.root.state.times.steps.length;i>1;i=Math.ceil(i/2))for(let r of s)if((this.root.state.calendar.day.maxWidths[r]+t)*i<=e&&i>1)return{count:i,type:r};return{count:0,type:""}},howManyMonthsFit(){const t=this.root.style("calendar-row")["stroke-width"]+2;let e=this.root.state.width,s=Object.keys(this.root.state.calendar.month.format),i=a()(this.root.state.times.firstDate),r=i.clone();const o=this.root.state.times.lastTime;let n=1;for(;i.valueOf()<=o;)i=i.add(1,"day"),r.month()!=i.month()&&n++,r=i.clone();for(let i=n;i>1;i=Math.ceil(i/2))for(let r of s)if((this.root.state.calendar.month.maxWidths[r]+t)*i<=e&&i>1)return{count:i,type:r};return{count:1,type:s[0]}},hourTextStyle(){return"font-family:"+this.root.state.calendar.hour.fontFamily+";font-size:"+this.root.state.calendar.hour.fontSize},dayTextStyle(){return"font-family:"+this.root.state.calendar.day.fontFamily+";font-size:"+this.root.state.calendar.day.fontSize}},computed:{getX(){return this.root.style("calendar-row")["stroke-width"]/2},getY(){return this.root.style("calendar-row")["stroke-width"]/2},getWidth(){return this.root.state.width-this.root.style("calendar-row")["stroke-width"]},monthsStyle(){return this.root.mergeDeep({},this.root.state.calendar.styles.row,this.root.state.calendar.month.style)},daysStyle(){return this.root.mergeDeep({},this.root.state.calendar.styles.row,this.root.state.calendar.day.style)},hoursStyle(){return this.root.mergeDeep({},this.root.state.calendar.styles.row,this.root.state.calendar.hour.style)},generateHours(){let t=[];for(let e=0,s=this.root.state.times.steps.length;e<s;e++){const s=this.howManyHoursFit(e),i=24/s.count,r=this.root.state.times.steps[e].width.px/s.count;for(let o=0,n=s.count;o<n;o++){const n=a()(this.root.state.times.steps[e].date).add(o*i,"hour");let l=0;void 0!==this.root.state.calendar.hour.widths[e]&&(l=this.root.state.calendar.hour.widths[e][s.type]);let h=this.root.style("calendar-row")["stroke-width"]/2+this.root.state.times.steps[e].offset.px+r*o;t.push({index:e,key:this.root.state.times.steps[e].date.valueOf()+"h"+o,x:h,y:this.root.style("calendar-row")["stroke-width"]/2+this.root.state.calendar.day.height+this.root.state.calendar.month.height,width:r,textWidth:l,height:this.root.state.calendar.hour.height,label:this.root.state.calendar.hour.format[s.type](n)})}}return t.filter(t=>this.root.isInsideViewPort(t.x,t.width))},generateDays(){let t=[];const e=this.howManyDaysFit(),s=Math.ceil(this.root.state.times.steps.length/e.count);for(let i=0,r=this.root.state.times.steps.length;i<r;i+=s){let r=0;for(let t=0;t<s;t++)void 0!==this.root.state.times.steps[i+t]&&(r+=this.root.state.times.steps[i+t].width.px);const o=a()(this.root.state.times.steps[i].date);let n=0;void 0!==this.root.state.calendar.day.widths[i]&&(n=this.root.state.calendar.day.widths[i][e.type]);let l=this.root.style("calendar-row")["stroke-width"]/2+this.root.state.times.steps[i].offset.px;t.push({index:i,key:this.root.state.times.steps[i].date.valueOf()+"d",x:l,y:this.root.style("calendar-row")["stroke-width"]/2+this.root.state.calendar.month.height,width:r,textWidth:n,height:this.root.state.calendar.day.height,label:this.root.state.calendar.day.format[e.type](o)})}return t.filter(t=>this.root.isInsideViewPort(t.x,t.width))},generateMonths(){let t=[];const e=this.howManyMonthsFit();let s=Object.keys(this.root.state.calendar.month.format),i=a()(this.root.state.times.firstDate);for(let r=0;r<e.count;r++){let e=0,o=Number.MAX_SAFE_INTEGER,n=a()(i).add(1,"month").startOf("month");n.valueOf()>this.root.state.times.lastDate.valueOf()&&(n=a()(this.root.state.times.lastDate));for(let t=0,s=this.root.state.times.steps.length;t<s;t++){let s=this.root.state.times.steps[t];s.date.valueOf()>=i.valueOf()&&s.date.valueOf()<n.valueOf()&&(e+=s.width.px,s.offset.px<o&&(o=s.offset.px))}let l,h="";for(let t of s)this.root.state.calendar.month.maxWidths[t]+2<=e&&(h=this.root.state.calendar.month.format[t](i),l=t);let c=0;void 0!==this.root.state.calendar.month.widths[r]&&(c=this.root.state.calendar.month.widths[r][l]);let d=this.root.style("calendar-row")["stroke-width"]/2+o;t.push({index:r,key:r+"m",x:d,y:this.root.style("calendar-row")["stroke-width"]/2,width:e,textWidth:c,choosenFormatName:l,height:this.root.state.calendar.month.height,label:h}),(i=i.add(1,"month").startOf("month")).valueOf()>this.root.state.times.lastDate.valueOf()&&(i=a()(this.root.state.times.lastDate))}return t.filter(t=>this.root.isInsideViewPort(t.x,t.width))}}},C,[],!1,null,null,null);M.options.__file="src/components/Calendar/Calendar.vue";var S=M.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"gantt-elastic__chart-dependency-lines-container",style:t.root.style("chart-dependency-lines-container"),attrs:{width:"100%",height:"100%"}},t._l(t.dependencyTasks,function(e){return s("g",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"task.visible"}],key:e.id,attrs:{task:e}},t._l(e.dependencyLines,function(i){return s("path",{key:i.id,staticClass:"gantt-elastic__chart-dependency-lines-path",style:t.root.style("chart-dependency-lines-path",e.style["chart-dependency-lines-path"]),attrs:{task:e,d:i.points}})}))}))};D._withStripped=!0;var z=c({inject:["root"],props:["tasks"],data:()=>({}),methods:{getPoints(t,e){const s=this.root.getTask(t),i=this.root.getTask(e);if(null===s||null===i||!i.visible||!s.visible)return null;const r=s.x+s.width,a=s.y+s.height/2,o=i.x,n=i.y+i.height/2,l=o-r;let h,c=1;n>=a?h=n-a:(h=a-n,c=-1);let d=`M ${r} ${a}\n          L ${r+10},${a} `;return d+=l<=14?`Q ${r+10+4},${a} ${r+10+4},${a+4*c}\n            L ${r+10+4},${a+h*c/2-4*c}\n            Q ${r+10+4},${a+h*c/2} ${r+10},${a+h*c/2}\n            L ${r-10+l},${a+h*c/2}\n            Q ${r-10+l-4},${a+h*c/2} ${r-10+l-4},${a+h*c/2+4*c}\n            L ${r-10+l-4},${n-4*c}\n            Q ${r-10+l-4},${n} ${r-10+l},${n}\n            L ${o},${n}`:`L ${r+l/2-4},${a}\n            Q ${r+l/2},${a} ${r+l/2},${a+4*c}\n            L ${r+l/2},${n-4*c}\n            Q ${r+l/2},${n} ${r+l/2+4},${n}\n            L ${o},${n}`}},computed:{dependencyTasks(){return this.tasks.filter(t=>void 0!==t.dependentOn).map(t=>(t.dependencyLines=t.dependentOn.map(e=>({points:this.getPoints(e,t.id)})),t)).filter(t=>null!==t.dependencyLines.points)}}},D,[],!1,null,null,null);z.options.__file="src/components/Chart/DependencyLines.vue";var E=z.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("g",{staticClass:"gantt-elastic__chart-row-bar-wrapper gantt-elastic__chart-row-task-wrapper",style:t.root.style("chart-row-bar-wrapper","chart-row-task-wrapper",t.task.style["chart-row-bar-wrapper"])},[s("svg",{staticClass:"gantt-elastic__chart-row-bar gantt-elastic__chart-row-task",style:t.root.style("chart-row-bar","chart-row-task",t.task.style["chart-row-bar"]),attrs:{x:t.task.x,y:t.task.y,width:t.task.width,height:t.task.height,xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){t.emitEvent("click",e)},mouseenter:function(e){t.emitEvent("mouseenter",e)},mouseover:function(e){t.emitEvent("mouseover",e)},mouseout:function(e){t.emitEvent("mouseout",e)},mousemove:function(e){t.emitEvent("mousemove",e)},mousedown:function(e){t.emitEvent("mousedown",e)},mouseup:function(e){t.emitEvent("mouseup",e)},mousewheel:function(e){t.emitEvent("mousewheel",e)},touchstart:function(e){t.emitEvent("touchstart",e)},touchmove:function(e){t.emitEvent("touchmove",e)},touchend:function(e){t.emitEvent("touchend",e)}}},[s("defs",[s("clipPath",{attrs:{id:t.clipPathId}},[s("polygon",{attrs:{points:t.getPoints}})])]),t._v(" "),s("polygon",{staticClass:"gantt-elastic__chart-row-bar-polygon gantt-elastic__chart-row-task-polygon",style:t.root.style("chart-row-bar-polygon","chart-row-task-polygon",t.task.style.base,t.task.style["chart-row-bar-polygon"]),attrs:{points:t.getPoints}}),t._v(" "),s("progress-bar",{attrs:{task:t.task,"clip-path":"url(#"+t.clipPathId+")"}})],1),t._v(" "),t.root.state.row.showText?s("chart-text",{attrs:{task:t.task}}):t._e()],1)};O._withStripped=!0;var P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"gantt-elastic__chart-row-text-wrapper",style:t.root.style("chart-row-text-wrapper"),attrs:{x:t.task.x+t.task.width+t.root.state.chartText.offset,y:t.task.y-t.root.state.grid.horizontal.gap,width:t.getWidth,height:t.getHeight}},[s("foreignObject",{attrs:{x:"0",y:"0",width:"100%",height:t.getHeight}},[s("div",{staticClass:"gantt-elastic__chart-row-text",style:t.root.style("chart-row-text"),attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[t.html?t._e():s("div",{staticClass:"gantt-elastic__chart-row-text-content gantt-elastic__chart-row-text-content--text",style:Object.assign({},t.root.style("chart-row-text-content","chart-row-text-content--text"),t.contentStyle)},[s("div",[t._v(t._s(t.task.label))])]),t._v(" "),t.html?s("div",{staticClass:"gantt-elastic__chart-row-text-content gantt-elastic__chart-row-text-content--html",style:Object.assign({},t.root.style("chart-row-text-content","chart-row-text-content--html"),t.contentStyle),domProps:{innerHTML:t._s(t.task.label)}}):t._e()])])],1)};P._withStripped=!0;var H=c({inject:["root"],props:["task"],data:()=>({}),computed:{getWidth(){const t=this.root.style("chart-row-text");return this.root.state.ctx.font=`${t["font-weight"]} ${t["font-size"]} ${t["font-family"]}`,this.root.state.ctx.measureText(this.task.label).width+2*this.root.state.chartText.xPadding},getHeight(){return this.task.height+2*this.root.state.grid.horizontal.gap},contentStyle(){return{height:"100%","line-height":this.getHeight+"px"}},html(){const t=this.root.state.taskList.columns;for(let e=0,s=t.length;e<s;e++){const s=t[e];if("label"===s.value&&void 0!==s.html&&s.html)return!0}return!1}}},P,[],!1,null,null,null);H.options.__file="src/components/Chart/Text.vue";var W=H.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("g",{staticClass:"gantt-elastic__chart-row-progress-bar-wrapper",style:t.root.style("chart-row-progress-bar-wrapper",t.task.style["chart-row-progress-bar-wrapper"])},[s("defs",[s("pattern",{attrs:{id:"diagonalHatch",width:t.root.state.progress.width,height:t.root.state.progress.width,patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse"}},[s("line",{staticClass:"chart-row-progress-bar-line",style:t.root.style("chart-row-progress-bar-line",t.task.style["chart-row-progress-bar-line"]),attrs:{x1:"0",y1:"0",x2:"0",y2:t.root.state.progress.width}})])]),t._v(" "),t.root.state.progress.bar?s("rect",{staticClass:"gantt-elastic__chart-row-progress-bar-solid",style:t.root.style("chart-row-progress-bar-solid",t.task.style["chart-row-progress-bar-solid"]),attrs:{x:"0",y:"0",width:t.getProgressWidth}}):t._e(),t._v(" "),t.root.state.progress.pattern?s("g",[s("rect",{staticClass:"gantt-elastic__chart-row-progress-bar-pattern",style:t.root.style("chart-row-progress-bar-pattern",t.task.style["chart-row-progress-bar-pattern"]),attrs:{x:t.getProgressWidth,y:"0",width:100-t.task.progress+"%",height:"100%"}}),t._v(" "),s("path",{staticClass:"gantt-elastic__chart-row-progress-bar-outline",style:t.root.style("chart-row-progress-bar-outline",t.task.style.base,t.task.style["chart-row-progress-bar-outline"]),attrs:{d:t.getLinePoints}})]):t._e()])};j._withStripped=!0;var I=c({inject:["root"],props:["task"],data:()=>({}),computed:{getProgressWidth(){return this.task.progress+"%"},getLinePoints(){const t=this.task.width/100*this.task.progress;return`M ${t} 0 L ${t} ${this.task.height}`},getSolidStyle(){return Object.assign({},this.root.state.progress.styles.bar.solid,this.task.progressBarStyle.bar)},getLineStyle(){return Object.assign({},{stroke:this.root.state.row.styles.bar.stroke+"a0","stroke-width":this.root.state.row.styles.bar["stroke-width"]/2},this.task.style)}}},j,[],!1,null,null,null);I.options.__file="src/components/Chart/ProgressBar.vue";var V=I.exports,Y=c({components:{ChartText:W,ProgressBar:V},inject:["root"],props:["task"],data:()=>({}),computed:{clipPathId(){return"gantt-elastic__task-clip-path-"+this.task.id},getViewBox(){const t=this.task;return`0 0 ${t.width} ${t.height}`},getGroupTransform(){return`translate(${this.task.x} ${this.task.y})`},getPoints(){const t=this.task;return`0,0 ${t.width},0 ${t.width},${t.height} 0,${t.height}`}},methods:{emitEvent(t,e){this.root.state.scroll.scrolling||this.root.$emit(`chart-${this.task.type}-${t}`,{event:e,data:this.task})}}},O,[],!1,null,null,null);Y.options.__file="src/components/Chart/Row/Task.vue";var R=Y.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("g",{staticClass:"gantt-elastic__chart-row-bar-wrapper gantt-elastic__chart-row-milestone-wrapper",style:t.root.style("chart-row-bar-wrapper","chart-row-milestone-wrapper",t.task.style["chart-row-bar-wrapper"])},[s("svg",{staticClass:"gantt-elastic__chart-row-bar gantt-elastic__chart-row-milestone",style:t.root.style("chart-row-bar","chart-row-milestone",t.task.style["chart-row-bar"]),attrs:{x:t.task.x,y:t.task.y,width:t.task.width,height:t.task.height,xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){t.emitEvent("click",e)},mouseenter:function(e){t.emitEvent("mouseenter",e)},mouseover:function(e){t.emitEvent("mouseover",e)},mouseout:function(e){t.emitEvent("mouseout",e)},mousemove:function(e){t.emitEvent("mousemove",e)},mousedown:function(e){t.emitEvent("mousedown",e)},mouseup:function(e){t.emitEvent("mouseup",e)},mousewheel:function(e){t.emitEvent("mousewheel",e)},touchstart:function(e){t.emitEvent("touchstart",e)},touchmove:function(e){t.emitEvent("touchmove",e)},touchend:function(e){t.emitEvent("touchend",e)}}},[s("defs",[s("clipPath",{attrs:{id:t.clipPathId}},[s("polygon",{attrs:{points:t.getPoints}})])]),t._v(" "),s("polygon",{staticClass:"gantt-elastic__chart-row-bar-polygon gantt-elastic__chart-row-milestone-polygon",style:t.root.style("chart-row-bar-polygon","chart-row-milestone-polygon",t.task.style.base,t.task.style["chart-row-bar-polygon"]),attrs:{points:t.getPoints}}),t._v(" "),s("progress-bar",{attrs:{task:t.task,"clip-path":"url(#"+t.clipPathId+")"}})],1),t._v(" "),t.root.state.row.showText?s("chart-text",{attrs:{task:t.task}}):t._e()],1)};U._withStripped=!0;var F=c({components:{ChartText:W,ProgressBar:V},inject:["root"],props:["task"],data:()=>({}),computed:{clipPathId(){return"gantt-elastic__milestone-clip-path-"+this.task.id},getViewBox(){return`0 0 ${this.task.width} ${this.task.height}`},getGroupTransform(){return`translate(${this.task.x} ${this.task.y})`},getPoints(){const t=this.task,e=t.height/2;let s=e;return t.width/2-s<0&&(s=t.width/2),`0,${e}\n        ${s},0\n        ${t.width-s},0\n        ${t.width},${e}\n        ${t.width-s},${t.height}\n        ${s},${t.height}`}},methods:{emitEvent(t,e){this.root.state.scroll.scrolling||this.root.$emit(`chart-${this.task.type}-${t}`,{event:e,data:this.task})}}},U,[],!1,null,null,null);F.options.__file="src/components/Chart/Row/Milestone.vue";var X=F.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("g",{staticClass:"gantt-elastic__chart-row-bar-wrapper gantt-elastic__chart-row-project-wrapper",style:t.root.style("chart-row-bar-wrapper",t.root.style("chart-row-project-wrapper"),t.task.style["chart-row-bar-wrapper"])},[s("svg",{staticClass:"gantt-elastic__chart-row-bar gantt-elastic__chart-row-project",style:t.root.style("chart-row-bar","chart-row-project",t.task.style["chart-row-bar"]),attrs:{x:t.task.x,y:t.task.y,width:t.task.width,height:t.task.height,xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){t.emitEvent("click",e)},mouseenter:function(e){t.emitEvent("mouseenter",e)},mouseover:function(e){t.emitEvent("mouseover",e)},mouseout:function(e){t.emitEvent("mouseout",e)},mousemove:function(e){t.emitEvent("mousemove",e)},mousedown:function(e){t.emitEvent("mousedown",e)},mouseup:function(e){t.emitEvent("mouseup",e)},mousewheel:function(e){t.emitEvent("mousewheel",e)},touchstart:function(e){t.emitEvent("touchstart",e)},touchmove:function(e){t.emitEvent("touchmove",e)},touchend:function(e){t.emitEvent("touchend",e)}}},[s("defs",[s("clipPath",{attrs:{id:t.clipPathId}},[s("path",{attrs:{d:t.getPoints}})])]),t._v(" "),s("path",{staticClass:"gantt-elastic__chart-row-bar-polygon gantt-elastic__chart-row-project-polygon",style:t.root.style("chart-row-bar-polygon","chart-row-project-polygon",t.task.style.base,t.task.style["chart-row-bar-polygon"]),attrs:{d:t.getPoints}}),t._v(" "),s("progress-bar",{attrs:{task:t.task,"clip-path":"url(#"+t.clipPathId+")"}})],1),t._v(" "),t.root.state.row.showText?s("chart-text",{attrs:{task:t.task}}):t._e()],1)};B._withStripped=!0;var N=c({components:{ChartText:W,ProgressBar:V},inject:["root"],props:["task"],data:()=>({}),computed:{clipPathId(){return"gantt-elastic__project-clip-path-"+this.task.id},getViewBox(){return`0 0 ${this.task.width} ${this.task.height}`},getGroupTransform(){return`translate(${this.task.x} ${this.task.y})`},getPoints(){const t=this.task,e=t.height-t.height/4,s=t.height/6,i=t.height/8;return`M ${i},0\n                L ${t.width-i} 0\n                L ${t.width} ${i}\n                L ${t.width} ${e}\n                L ${t.width-s} ${t.height}\n                L ${t.width-2*s} ${e}\n                L ${2*s} ${e}\n                L ${s} ${t.height}\n                L 0 ${e}\n                L 0 ${i}\n                Z\n        `}},methods:{emitEvent(t,e){this.root.state.scroll.scrolling||this.root.$emit(`chart-${this.task.type}-${t}`,{event:e,data:this.task})}}},B,[],!1,null,null,null);N.options.__file="src/components/Chart/Row/Project.vue";var A=c({components:{Grid:b,DependencyLines:E,Calendar:S,Task:R,Milestone:X,Project:N.exports},inject:["root"],data:()=>({moving:!1}),mounted(){this.root.state.refs.chart=this.$refs.chart,this.root.state.refs.chartGraph=this.$refs.chartGraph},computed:{getWidth(){return this.root.state.width},getHeight(){return this.root.state.height},getViewBox(){return`0 0 ${Math.round(this.getWidth)} ${this.root.state.allVisibleTasksHeight}`}}},x,[],!1,null,null,null);A.options.__file="src/components/Chart/Chart.vue";var G=c({components:{TaskList:k,Chart:A.exports},inject:["root"],props:["tasks","options"],data:()=>({defs:"",mousePos:{x:0,y:0,movementX:0,movementY:0,lastX:0,lastY:0,positiveX:0,positiveY:0,currentX:0,currentY:0}}),mounted(){this.root.state.refs.svgMainView=this.$refs.svgMainView,this.root.state.refs.svgChart=this.$refs.svgChart,this.root.state.refs.svgChartContainer=this.$refs.svgChartContainer,this.root.state.refs.svgTaskList=this.$refs.svgTaskList,this.root.state.refs.chartScrollContainerHorizontal=this.$refs.chartScrollContainerHorizontal,this.root.state.refs.chartScrollContainerVertical=this.$refs.chartScrollContainerVertical,document.addEventListener("mouseup",this.chartMouseUp.bind(this)),document.addEventListener("mousemove",this.chartMouseMove.bind(this)),document.addEventListener("touchmove",this.chartMouseMove.bind(this)),document.addEventListener("touchend",this.chartMouseUp.bind(this))},computed:{getWidth(){return this.root.state.width+this.root.state.taskList.finalWidth},getMarginLeft(){return this.root.state.taskList.display?this.root.state.taskList.finalWidth+"px":"0px"},verticalStyle(){return{width:this.root.state.scrollBarHeight+"px",height:this.root.state.rowsHeight+"px","margin-top":this.root.state.calendar.height+this.root.state.calendar.gap+"px"}}},methods:{mouseMove(t){this.root.$emit("main-view-mousemove",t)},mouseUp(t){this.root.$emit("main-view-mouseup",t)},onHorizontalScroll(t){this.root.$emit("chart-scroll-horizontal",t)},onVerticalScroll(t){this.root.$emit("chart-scroll-vertical",t)},chartWheel(t){this.root.$emit("chart-wheel",t)},chartMouseDown(t){void 0!==t.touches&&(this.mousePos.x=this.mousePos.lastX=t.touches[0].screenX,this.mousePos.y=this.mousePos.lastY=t.touches[0].screenY,this.mousePos.movementX=0,this.mousePos.movementY=0,this.mousePos.currentX=this.$refs.chartScrollContainerHorizontal.scrollLeft,this.mousePos.currentY=this.$refs.chartScrollContainerVertical.scrollTop),this.root.state.scroll.scrolling=!0},chartMouseUp(t){this.root.state.scroll.scrolling=!1},chartMouseMove(t){if(this.root.state.scroll.scrolling){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation();const e=void 0!==t.touches;let s,i;if(e){const e=t.touches[0].screenX,r=t.touches[0].screenY;s=this.mousePos.x-e,i=this.mousePos.y-r,this.mousePos.lastX=e,this.mousePos.lastY=r}else s=t.movementX,i=t.movementY;const r=this.$refs.chartScrollContainerHorizontal,a=this.$refs.chartScrollContainerVertical;let o=0,n=0;o=e?this.mousePos.currentX+s*this.root.state.scroll.dragXMoveMultiplier:r.scrollLeft-s*this.root.state.scroll.dragXMoveMultiplier,r.scrollLeft=o,n=e?this.mousePos.currentY+i*this.root.state.scroll.dragYMoveMultiplier:a.scrollTop-i*this.root.state.scroll.dragYMoveMultiplier,a.scrollTop=n}}},beforeDestroy(){document.removeEventListener("mouseup",this.chartMouseUp),document.removeEventListener("mousemove",this.chartMouseMove),document.removeEventListener("touchmove",this.chartMouseMove),document.removeEventListener("touchend",this.chartMouseUp)}},o,[],!1,null,null,null);G.options.__file="src/components/MainView.vue";var Z=G.exports;
/**
* @fileoverview Styles for gantt-elastic
* @license MIT
* @author Rafal Pospiech <neuronet.io@gmail.com>
* @package GanttElastic
*/const J="Arial, sans-serif";var Q={"main-view":{background:"#FFFFFF"},container:{display:"flex","max-width":"100%",position:"absolute",height:"100%"},header:{"font-family":J,margin:"0px auto",background:"#f3f5f747",padding:"10px",overflow:"hidden",clear:"both",display:"flex","justify-content":"space-between"},"header-title":{float:"left"},"header-options":{float:"right"},"header-title--text":{"font-size":"20px","vertical-align":"middle","font-weight":"400","line-height":"35px","padding-left":"22px","letter-spacing":"1px"},"header-title--html":{"font-size":"20px","vertical-align":"middle","font-weight":"400","line-height":"35px","padding-left":"22px","letter-spacing":"1px"},"header-btn-recenter":{background:"#95A5A6",border:"none",outline:"none",cursor:"pointer",color:"white","border-radius":"3px","margin-right":"27px","font-size":"16px",padding:"8px 12px"},"header-slider":{},"header-slider-wrapper":{display:"inline-block","vertical-align":"middle"},"header-slider--slider":{},"header-slider--process":{background:"#ccc"},"header-task-list-switch--label":{},"header-task-list-switch":{margin:"0px 15px","vertical-align":"middle"},"header-label":{},"calendar-wrapper":{"user-select":"none"},calendar:{width:"100%",height:"100%",background:"#f3f5f7","border-color":"#f3f5f7"},"calendar-row":{fill:"transparent",stroke:"#dadada","stroke-width":.5},"calendar-row--month":{},"calendar-row--day":{},"calendar-row--hour":{},"calendar-row-rect--month":{},"calendar-row-text--month":{"font-family":J,"font-size":"12px",fill:"#606060",stroke:"none"},"calendar-row-rect--day":{},"calendar-row-text--day":{"font-family":J,"font-size":"12px",fill:"#606060",stroke:"none"},"calendar-row-rect--hour":{},"calendar-row-text--hour":{"font-family":J,"font-size":"12px",fill:"#606060",stroke:"none"},"task-list-wrapper":{},"task-list":{background:"transparent","border-color":"#eee"},"task-list-header":{display:"flex","user-select":"none","vertical-align":"middle"},"task-list-header-column":{border:"1px solid #00000050","border-top":"none","border-right":"none","box-sizing":"border-box",display:"flex",background:"#f3f5f7","border-color":"transparent"},"task-list-column-expander-wrapper":{display:"inline-flex","flex-shrink":"0","box-sizing":"border-box",margin:"0 10px"},"task-list-column-expander-content":{display:"inline-flex",cursor:"pointer",margin:"auto 0px","box-sizing":"border-box","user-select":"none"},"task-list-column-expander-line":{fill:"transparent",stroke:"#000000","stroke-width":"1","stroke-linecap":"round"},"task-list-column-expander-border":{fill:"#ffffffa0",stroke:"#000000"},"task-list-header-label":{overflow:"hidden","text-overflow":"ellipsis","font-family":J,"font-size":"12px","box-sizing":"border-box",margin:"auto 6px","flex-grow":"1","vertical-align":"middle"},"task-list-header-resizer-wrapper":{background:"transparent",height:"100%",width:"6px",cursor:"col-resize",display:"inline-flex","vertical-align":"center"},"task-list-header-resizer":{margin:"auto 0px"},"task-list-header-resizer-dot":{width:"3px",height:"3px",background:"#ddd","border-radius":"100%",margin:"4px 0px"},"task-list-items":{overflow:"hidden"},"task-list-item":{"border-top":"1px solid #eee","border-right":"1px solid #eee","box-sizing":"border-box",display:"flex",background:"transparent"},"task-list-item-column":{display:"inline-flex","flex-shrink":"0","border-left":"1px solid #00000050","box-sizing":"border-box","border-color":"#eee"},"task-list-item-value-wrapper":{overflow:"hidden",display:"flex",width:"100%"},"task-list-item-value-container":{margin:"auto 0px",overflow:"hidden"},"task-list-item-value":{display:"block","flex-shrink":"100","font-family":J,"font-size":"12px",margin:"auto 6px",overflow:"hidden","text-overflow":"ellipsis","line-height":"1.5em","word-break":"keep-all","white-space":"nowrap",color:"#606060",background:"#FFFFFF"},"grid-lines":{},"grid-line-horizontal":{stroke:"#00000010","stroke-width":1},"grid-line-vertical":{stroke:"#00000010","stroke-width":1},"grid-line-time":{stroke:"#FF000080","stroke-width":1},chart:{"user-select":"none",overflow:"hidden"},"chart-graph":{overflow:"hidden"},"chart-row-text-wrapper":{},"chart-row-text":{background:"#ffffffa0","border-radius":"10px","font-family":J,"font-size":"12px","font-weight":"normal",color:"#000000a0",height:"100%",display:"inline-block"},"chart-row-text-content":{padding:"0px 6px"},"chart-row-text-content--text":{},"chart-row-text-content--html":{},"chart-row-wrapper":{},"chart-row-bar-wrapper":{},"chart-row-bar":{},"chart-row-bar-polygon":{stroke:"#E74C3C","stroke-width":1,fill:"#F75C4C"},"chart-row-project-wrapper":{},"chart-row-project":{},"chart-row-project-polygon":{},"chart-row-milestone-wrapper":{},"chart-row-milestone":{},"chart-row-milestone-polygon":{},"chart-row-task-wrapper":{},"chart-row-task":{},"chart-row-task-polygon":{},"chart-row-progress-bar-wrapper":{},"chart-row-progress-bar":{},"chart-row-progress-bar-line":{stroke:"#ffffff25","stroke-width":20},"chart-row-progress-bar-solid":{fill:"#E74C3C",height:"20%"},"chart-row-progress-bar-pattern":{fill:"url(#diagonalHatch)",transform:"translateY(0.1) scaleY(0.8)"},"chart-row-progress-bar-outline":{stroke:"#E74C3C","stroke-width":1},"chart-dependency-lines-wrapper":{},"chart-dependency-lines-path":{fill:"transparent",stroke:"#FFa00090","stroke-width":2},"chart-scroll-container":{},"chart-scroll-container--horizontal":{overflow:"auto","max-width":"100%"},"chart-scroll-container--vertical":{"overflow-y":"auto","overflow-x":"hidden","max-height":"100%",float:"right"},"svg-chart":{overflow:"hidden"},"svg-container-wrapper":{overflow:"hidden"},"svg-container":{float:"left",position:"relative","max-width":"100%"},"slot-header-beforeOptions":{display:"inline-block"}};function q(t){return t&&"object"==typeof t&&!Array.isArray(t)}function K(t,...e){if(!e.length)return t;const s=e.shift();if(q(t)&&q(s))for(const e in s)q(s[e])?(t[e]||Object.assign(t,{[e]:{}}),K(t[e],s[e])):Object.assign(t,{[e]:s[e]});return K(t,...e)}function tt(t,e,...s){if(!s.length)return e;const i=s.shift();if(q(e)&&q(i))for(const s in i)q(i[s])?(e[s]||t.$set(e,s,{}),tt(t,e[s],i[s])):t.$set(e,s,i[s]);return tt(t,e,...s)}const et={};var st={components:{MainView:Z},props:["tasks","options"],provide(){const t={},e=this;return Object.defineProperty(t,"root",{enumerable:!0,get:()=>e}),t},data:()=>({state:{tasks:[],scrollBarHeight:0,allVisibleTasksHeight:0,refs:{},tasksById:{}}}),methods:{mergeDeep:K,mergeDeepReactive:tt,getScrollBarHeight(){const t=document.createElement("div");t.style.visibility="hidden",t.style.height="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=t.offsetHeight;t.style.overflow="scroll";var s=document.createElement("div");s.style.height="100%",t.appendChild(s);var i=s.offsetHeight;return t.parentNode.removeChild(t),this.state.scrollBarHeight=e-i},style(...t){const e=JSON.stringify(t);if(void 0!==et[e])return et[e];let s={};return t.forEach(t=>{"string"==typeof t?s=Object.assign({},s,this.state.style[t]):"object"==typeof t?s=Object.assign({},s,t):"function"==typeof t&&(s=Object.assign({},t()))}),et[e]=s,s},refreshTasks(){this.state.tasks=this.state.tasks.map(t=>(void 0===t.x&&this.$set(t,"x",0),void 0===t.y&&this.$set(t,"y",0),void 0===t.width&&this.$set(t,"width",0),void 0===t.height&&this.$set(t,"height",0),void 0===t.tooltip&&this.mergeDeepReactive(this,t,{tooltip:{visible:!1}}),void 0===t.tooltip.visible&&(t.tooltip.visible=!1),void 0===t.mouseOver&&this.$set(t,"mouseOver",!1),void 0===t.visible&&this.$set(t,"visible",!0),void 0===t.collapsed&&this.$set(t,"collapsed",!1),void 0===t.dependentOn&&this.$set(t,"dependentOn",[]),void 0===t.parentId&&this.$set(t,"parentId",null),void 0===t.style&&this.$set(t,"style",{}),void 0===t.children&&this.$set(t,"children",[]),void 0===t.allChildren&&this.$set(t,"allChildren",[]),void 0===t.parents&&this.$set(t,"parents",[]),void 0===t.parent&&this.$set(t,"parent",null),void 0===t.durationMs&&this.$set(t,"durationMs",[]),t))},initialize(){var t;this.mergeDeepReactive(this,this.state,(t=this.options,{style:Q,slots:{header:{}},title:{label:"gantt-elastic",html:!1},width:0,height:0,rowsHeight:0,allVisibleTasksHeight:0,scroll:{scrolling:!1,dragXMoveMultiplier:3,dragYMoveMultiplier:2,top:0,taskList:{left:0,right:0,top:0,bottom:0},chart:{left:0,right:0,percent:0,timePercent:0,top:0,bottom:0,time:0,timeCenter:0,dateTime:{left:"",right:""}}},svgElement:null,scope:{before:1,after:1},times:{timeScale:6e4,timeZoom:17,timePerPixel:0,fistDate:null,firstTime:null,lastDate:null,lastTime:null,firstTaskDate:null,firstTaskTime:0,lastTaskDate:null,lastTaskTime:0,totalViewDurationMs:0,totalViewDurationPx:0,stepDuration:"day",steps:[]},row:{height:24,showText:!0},maxRows:20,maxHeight:0,chartText:{offset:0,xPadding:10},dependencyLines:{},progress:{width:20,height:6,pattern:!0,bar:!1},grid:{horizontal:{gap:6,lines:[]},vertical:{lines:[]},timeLine:{}},taskList:{display:!0,displayAfterResize:!0,columns:[{id:0,label:"ID",value:"id",width:40}],resizerWidth:0,percent:100,width:0,finalWidth:0,minWidth:18,expander:{size:16,columnWidth:24,padding:16,margin:10,straight:!1}},calendar:{gap:6,height:0,hour:{height:20,display:!0,widths:[],maxWidths:{},format:{long:e=>a()(e).locale(t.locale.code).format("HH:mm"),medium:e=>a()(e).locale(t.locale.code).format("HH:mm"),short:e=>a()(e).locale(t.locale.code).format("HH")}},day:{height:20,display:!0,widths:[],maxWidths:{},format:{long:e=>a()(e).locale(t.locale.code).format("DD dddd"),medium:e=>a()(e).locale(t.locale.code).format("DD ddd"),short:e=>a()(e).locale(t.locale.code).format("DD")}},month:{height:20,display:!0,widths:[],maxWidths:{},format:{short:e=>a()(e).locale(t.locale.code).format("MM"),medium:e=>a()(e).locale(t.locale.code).format("MMM 'YY"),long:e=>a()(e).locale(t.locale.code).format("MMMM YYYY")}}},defs:[],locale:{code:"en",Now:"Now","X-Scale":"Zoom-X","Y-Scale":"Zoom-Y","Task list width":"Task list","Before/After":"Expand","Display task list":"Show task list"}}),this.options,{tasks:this.tasks}),this.state.tasks=this.tasks.map(t=>(this.$set(t,"start",a()(t.start).format("YYYY-MM-DD HH:mm:ss")),t)),a.a.locale(this.options.locale,null,!0),void 0===this.state.taskList&&this.$set(this.state,"taskList",{}),void 0===this.state.taskList.columns&&this.$set(this.state.taskList,"columns",[]),this.state.taskList.columns=this.state.taskList.columns.map((t,e)=>(this.$set(t,"finalWidth",t.width/100*this.state.taskList.percent),void 0===t.height&&this.$set(t,"height",0),void 0===t.style&&this.$set(t,"style",{}),this.$set(t,"_id",`${e}-${t.label}`),t)),this.refreshTasks(),this.state.rootTask={id:null,label:"root",children:[],allChildren:[],parents:[],parent:null},this.resetTaskTree(),this.state.taskTree=this.makeTaskTree(this.state.rootTask),this.state.tasks=this.state.taskTree.allChildren,this.state.ctx=document.createElement("canvas").getContext("2d"),this.calculateTaskListColumnsDimensions(),this.state.scrollBarHeight=this.getScrollBarHeight(),this.state.outerHeight=this.state.height+this.state.scrollBarHeight},getCalendarHeight(){return this.state.calendar.height+this.style("calendar-row")["stroke-width"]+this.state.calendar.gap},calculateCalendarDimensions(){this.state.calendar.height=0,this.state.calendar.hour.display?this.state.calendar.height+=this.state.calendar.hour.height:this.state.calendar.hour.height=0,this.state.calendar.day.display?this.state.calendar.height+=this.state.calendar.day.height:this.state.calendar.day.height=0,this.state.calendar.month.display?this.state.calendar.height+=this.state.calendar.month.height:this.state.calendar.month.height=0},getMaximalLevel(){let t=0;return this.state.tasks.forEach(e=>{e.parents.length>t&&(t=e.parents.length)}),t-1},getMaximalExpanderWidth(){return this.getMaximalLevel()*this.state.taskList.expander.padding+this.state.taskList.expander.margin},syncScrollTop(){this.state.refs.taskListItems&&(this.state.scroll.top=this.state.refs.taskListItems.scrollTop=this.state.refs.chartScrollContainerVertical.scrollTop=this.state.refs.chartGraph.scrollTop)},calculateTaskListColumnsDimensions(){let t=0;this.state.taskList.columns.forEach(e=>{e.expander?e.finalWidth=(this.getMaximalExpanderWidth()+e.width)/100*this.state.taskList.percent:e.finalWidth=e.width/100*this.state.taskList.percent,t+=e.finalWidth,e.height=this.getTaskHeight()-this.style("grid-line-horizontal")["stroke-width"]}),this.state.taskList.finalWidth=t,"undefined"!=typeof document&&t>document.body.clientWidth/2&&(this.state.taskList.displayAfterResize=!1),this.syncScrollTop()},resetTaskTree(){this.state.rootTask.children=[],this.state.rootTask.allChildren=[],this.state.rootTask.parent=null,this.state.rootTask.parents=[],this.state.tasksById={};for(let t=0,e=this.state.tasks.length;t<e;t++){let e=this.state.tasks[t];e.children=[],e.allChildren=[],e.parent=null,e.parents=[],this.state.tasksById[e.id]=e}},makeTaskTree(t,e=!1){e=e||t.collapsed;for(let s=0,i=this.state.tasks.length;s<i;s++){let i=this.state.tasks[s];i.parentId===t.id&&(t.parents.length&&t.parents.forEach(t=>i.parents.push(t)),t!==this.root?(i.parents.push(t),i.parent=t):(i.parents=[],i.parent=null),(i=this.makeTaskTree(i,e||i.collapsed)).visible=!e,i.children.forEach(t=>{t.visible=!(e||i.collapsed)}),t.allChildren.push(i),t.children.push(i),i.allChildren.forEach(e=>t.allChildren.push(e)))}return t},getTask(t){return void 0!==this.state.tasksById[t]?this.state.tasksById[t]:null},getChildren(t){return this.state.tasks.filter(e=>e.parent===t)},getSVG(){return this.state.svgMainView.outerHTML},getImage(t="image/png"){return new Promise((e,s)=>{const i=new Image;i.onload=(()=>{const s=document.createElement("canvas");s.width=this.state.svgMainView.clientWidth,s.height=this.state.svgMainView.clientHeight,s.getContext("2d").drawImage(i,0,0),e(s.toDataURL(t))}),i.src="data:image/svg+xml,"+encodeURIComponent(this.getSVG())})},getHeight(t,e=!1){let s=t.length*(this.state.row.height+2*this.state.grid.horizontal.gap)+this.state.calendar.height+2*this.style("calendar-row")["stroke-width"]+this.state.calendar.gap;return e&&(s+=this.state.scrollBarHeight),s},getTaskHeight(t=!1){return t?this.state.row.height+2*this.state.grid.horizontal.gap+this.style("grid-line-horizontal")["stroke-width"]:this.state.row.height+2*this.state.grid.horizontal.gap},getTasksHeight(t,e=!1){return t.length*this.getTaskHeight()},timeToPixelOffsetX(t){let e=t-this.state.times.firstTime;return e&&(e/=this.state.times.timePerPixel),e},pixelOffsetXToTime(t){return(t+this.style("grid-line-vertical")["stroke-width"]/2)*this.state.times.timePerPixel+this.state.times.firstTime},isInsideViewPort(t,e,s=5e3){return t+e+s>=this.state.scroll.chart.left&&t-s<=this.state.scroll.chart.right||t-s<=this.state.scroll.chart.left&&t+e+s>=this.state.scroll.chart.right},onScrollChart(t){const e=this.state.refs.chartScrollContainerHorizontal,s=this.state.refs.chartScrollContainerVertical;this._onScrollChart(e.scrollLeft,s.scrollTop)},_onScrollChart(t,e){const s=this.state.refs.svgChartContainer.clientWidth;this.state.scroll.chart.left=t,this.state.scroll.chart.right=t+s,this.state.scroll.chart.percent=t/this.state.times.totalViewDurationPx*100,this.state.scroll.chart.top=e,this.state.scroll.chart.time=this.pixelOffsetXToTime(t),this.state.scroll.chart.timeCenter=this.pixelOffsetXToTime(t+s/2),this.state.scroll.chart.dateTime.left=a()(this.state.scroll.chart.time),this.state.scroll.chart.dateTime.right=a()(this.pixelOffsetXToTime(t+this.state.refs.chart.clientWidth)),this.scrollTo(t,e)},scrollToTime(t){let e=this.timeToPixelOffsetX(t);const s=this.state.refs.svgChartContainer.clientWidth;(e-=s/2)>this.state.width&&(e=this.state.width-s),this.scrollTo(e)},scrollTo(t=null,e=null){null!==t&&(this.state.refs.svgChartContainer.scrollLeft=t,this.state.refs.chartScrollContainerHorizontal.scrollLeft=t,this.state.scroll.left=t),null!==e&&(this.state.refs.chartScrollContainerVertical.scrollTop=e,this.state.refs.chartGraph.scrollTop=e,this.state.refs.taskListItems.scrollTop=e,this.state.scroll.top=e)},fixScrollPos(){this.$nextTick(()=>{this.scrollToTime(this.state.scroll.chart.timeCenter)})},onWheelChart(t){if(t.shiftKey){let e=this.state.scroll.left+t.deltaY;const s=this.state.refs.chartScrollContainerHorizontal.clientWidth,i=this.state.refs.chartScrollContainerHorizontal.scrollWidth-s;e<0?e=0:e>i&&(e=i),this.scrollTo(e)}else{let e=this.state.scroll.top+t.deltaY;const s=this.state.refs.chartGraph.clientHeight,i=this.state.refs.chartGraph.scrollHeight-s;e<0?e=0:e>i&&(e=i),this.scrollTo(null,e)}},onTimeZoomChange(t){this.state.times.timeZoom=t,this.recalculateTimes(),this.calculateSteps(),this.calculateCalendarDimensions(),this.fixScrollPos()},onRowHeightChange(t){this.state.row.height=t,this.calculateTaskListColumnsDimensions()},onScopeChange(t){this.state.scope.before=t,this.state.scope.after=t,this.initTimes(),this.calculateSteps(),this.computeCalendarWidths(),this.fixScrollPos()},onTaskListWidthChange(t){this.state.taskList.percent=t,this.calculateTaskListColumnsDimensions(),this.fixScrollPos()},onTaskListColumnWidthChange(t){this.calculateTaskListColumnsDimensions(),this.fixScrollPos()},initializeEvents(){this.$on("chart-scroll-horizontal",this.onScrollChart),this.$on("chart-scroll-vertical",this.onScrollChart),this.$on("chart-wheel",this.onWheelChart),this.$on("times-timeZoom-change",this.onTimeZoomChange),this.$on("row-height-change",this.onRowHeightChange),this.$on("scope-change",this.onScopeChange),this.$on("taskList-width-change",this.onTaskListWidthChange),this.$on("taskList-column-width-change",this.onTaskListColumnWidthChange)},recalculateTimes(){let t=60*this.state.times.timeScale/this.state.times.timeScale,e=this.state.times.timeZoom/100;this.state.times.timePerPixel=this.state.times.timeScale*t*e+Math.pow(2,this.state.times.timeZoom),this.state.times.totalViewDurationMs=this.state.times.lastDate.diff(this.state.times.firstDate,"milisecods"),this.state.times.totalViewDurationPx=this.state.times.totalViewDurationMs/this.state.times.timePerPixel,this.state.width=this.state.times.totalViewDurationPx+this.style("grid-line-vertical")["stroke-width"]},initTimes(){this.state.times.firstDate=a()(this.state.times.firstTaskDate).locale(this.locale).startOf("day").subtract(this.state.scope.before,"days").startOf("day"),this.state.times.lastDate=a()(this.state.times.lastTaskDate).locale(this.locale).endOf("day").add(this.state.scope.after,"days").endOf("day"),this.state.times.firstTime=this.state.times.firstDate.valueOf(),this.state.times.lastTime=this.state.times.lastDate.valueOf(),this.recalculateTimes()},calculateSteps(){const t=[],e=a()(this.state.times.lastDate).valueOf(),s=a()(this.state.times.firstDate);t.push({date:s,offset:{ms:0,px:0}});for(let s=a()(this.state.times.firstDate).add(1,this.state.times.stepDuration).startOf("day");s.valueOf()<=e;s=s.add(1,this.state.times.stepDuration).startOf("day")){const e=s.diff(this.state.times.firstDate,"milisecods"),i=e/this.state.times.timePerPixel,r={date:s,offset:{ms:e,px:i}},a=t[t.length-1];a.width={ms:e-a.offset.ms,px:i-a.offset.px},t.push(r)}const i=t[t.length-1];i.width={ms:this.state.times.totalViewDurationMs-i.offset.ms,px:this.state.times.totalViewDurationPx-i.offset.px},console.log("calculated steps",t),this.state.times.steps=t},computeCalendarWidths(){this.computeDayWidths(),this.computeHourWidths(),this.computeMonthWidths()},computeHourWidths(){const t=this.state,e=this.style("calendar-row-text--hour");t.ctx.font=e["font-size"]+" "+e["font-family"];let s=a()("2018-01-01T00:00:00"),i={};t.calendar.hour.widths=[],Object.keys(t.calendar.hour.format).forEach(t=>{i[t]=0});for(let e=0;e<24;e++){const r={hour:e};Object.keys(t.calendar.hour.format).forEach(e=>{r[e]=t.ctx.measureText(t.calendar.hour.format[e](s.toDate())).width}),t.calendar.hour.widths.push(r),Object.keys(t.calendar.hour.format).forEach(t=>{r[t]>i[t]&&(i[t]=r[t])}),s=s.add(1,"hour")}t.calendar.hour.maxWidths=i},computeDayWidths(){const t=this.state,e=this.style("calendar-row-text--day");t.ctx.font=e["font-size"]+" "+e["font-family"];let s=a()(t.times.steps[0].date),i={};t.calendar.day.widths=[],Object.keys(t.calendar.day.format).forEach(t=>{i[t]=0});for(let e=0,r=t.times.steps.length;e<r;e++){const r={day:e};Object.keys(t.calendar.day.format).forEach(e=>{r[e]=t.ctx.measureText(t.calendar.day.format[e](s.toDate())).width}),t.calendar.day.widths.push(r),Object.keys(t.calendar.day.format).forEach(t=>{r[t]>i[t]&&(i[t]=r[t])}),s=s.add(1,"day")}t.calendar.day.maxWidths=i},computeMonthWidths(){const t=this.state,e=this.style("calendar-row-text--month");t.ctx.font=e["font-size"]+" "+e["font-family"];let s={};t.calendar.month.widths=[],Object.keys(t.calendar.month.format).forEach(t=>{s[t]=0});let i=a()(this.state.times.firstDate);const r=Math.ceil(this.state.times.lastDate.diff(this.state.times.firstDate,"months",!0));for(let e=0;e<r;e++){const r={month:e};Object.keys(t.calendar.month.format).forEach(e=>{r[e]=t.ctx.measureText(t.calendar.month.format[e](i.toDate())).width}),t.calendar.month.widths.push(r),Object.keys(t.calendar.month.format).forEach(t=>{r[t]>s[t]&&(s[t]=r[t])}),i=i.add(1,"month")}t.calendar.month.maxWidths=s},prepareDates(){let t,e,s=Number.MAX_SAFE_INTEGER,i=0;for(let r=0,o=this.state.tasks.length;r<o;r++){let o=this.state.tasks[r];o.startDate=a()(o.start),o.startTime=o.startDate.valueOf(),o.durationMs=1e3*o.duration,o.startTime<s&&(s=o.startTime,t=o.startDate),o.startTime+o.durationMs>i&&(i=o.startTime+o.durationMs,e=a()(o.startTime+o.durationMs))}this.state.times.firstTaskTime=s,this.state.times.lastTaskTime=i,this.state.times.firstTaskDate=t,this.state.times.lastTaskDate=e,this.state.times.firstDate=a()(t).locale(this.locale).startOf("day").subtract(this.state.scope.before,"days").startOf("day"),this.state.times.lastDate=a()(e).locale(this.locale).endOf("day").add(this.state.scope.after,"days").endOf("day")},setup(){this.initialize(),this.state.tasksById={},this.state.tasks.forEach(t=>this.state.tasksById[t.id]=t),this.prepareDates(),this.initTimes(),this.calculateSteps(),this.computeCalendarWidths(),this.calculateCalendarDimensions(),this.state.taskList.width=this.state.taskList.columns.reduce((t,e)=>({width:t.width+e.width}),{width:0}).width},globalOnResize(t){this.state.taskList.finalWidth>document.body.clientWidth/2?this.state.taskList.displayAfterResize=!1:this.state.taskList.displayAfterResize=!0}},computed:{visibleTasks(){const t=this.state.tasks.filter(t=>t.visible),e=t.slice(0,this.state.maxRows);this.state.rowsHeight=this.getTasksHeight(e);let s=0;this.state.maxHeight&&this.state.rowsHeight>this.state.maxHeight&&(s=this.state.rowsHeight-this.state.maxHeight,this.state.rowsHeight=this.state.maxHeight),this.state.height=this.getHeight(e)-s,this.state.allVisibleTasksHeight=this.getTasksHeight(t),this.state.outerHeight=this.getHeight(e,!0)-s;let i=t.length;for(let e=0;e<i;e++){let s=t[e];s.width=s.durationMs/this.state.times.timePerPixel-this.style("grid-line-vertical")["stroke-width"],s.width<0&&(s.width=0),s.height=this.state.row.height,s.x=this.timeToPixelOffsetX(s.startTime),s.y=(this.state.row.height+2*this.state.grid.horizontal.gap)*e+this.state.grid.horizontal.gap}return this.$nextTick(()=>{this.syncScrollTop()}),t}},created(){this.$watch("tasks",t=>{this.setup(),this.$emit("tasks-changed",t)}),this.$watch("options",()=>{this.setup()}),this.initializeEvents(),this.setup(),this.$root.$emit("gantt-elastic-created",this)},mounted(){window.addEventListener("resize",this.globalOnResize),this.$root.$emit("gantt-elastic-mounted",this),this.$emit("mounted"),this.$root.$emit("gantt-elastic-ready",this)},beforeUpdate(){this.$emit("before-update")},updated(){this.$nextTick(()=>{this.$emit("updated")})},beforeDestroy(){window.removeEventListener("resize",this.globalOnResize),this.$emit("before-destroy")},destroyed(){this.$emit("destroyed")}};s(3);s.d(e,"mergeDeep",function(){return K}),s.d(e,"mergeDeepReactive",function(){return tt});var it=c(st,i,[],!1,null,null,null);it.options.__file="src/GanttElastic.vue";e.default=it.exports},function(t,e,s){"use strict";function i(t,e){for(var s=[],i={},r=0;r<e.length;r++){var a=e[r],o=a[0],n={id:t+":"+r,css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(n):s.push(i[o]={id:o,parts:[n]})}return s}s.r(e),s.d(e,"default",function(){return m});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=r&&(document.head||document.getElementsByTagName("head")[0]),n=null,l=0,h=!1,c=function(){},d=null,u="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(t,e,s,r){h=s,d=r||{};var o=i(t,e);return f(o),function(e){for(var s=[],r=0;r<o.length;r++){var n=o[r];(l=a[n.id]).refs--,s.push(l)}e?f(o=i(t,e)):o=[];for(r=0;r<s.length;r++){var l;if(0===(l=s[r]).refs){for(var h=0;h<l.parts.length;h++)l.parts[h]();delete a[l.id]}}}}function f(t){for(var e=0;e<t.length;e++){var s=t[e],i=a[s.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](s.parts[r]);for(;r<s.parts.length;r++)i.parts.push(w(s.parts[r]));i.parts.length>s.parts.length&&(i.parts.length=s.parts.length)}else{var o=[];for(r=0;r<s.parts.length;r++)o.push(w(s.parts[r]));a[s.id]={id:s.id,refs:1,parts:o}}}}function g(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function w(t){var e,s,i=document.querySelector("style["+u+'~="'+t.id+'"]');if(i){if(h)return c;i.parentNode.removeChild(i)}if(p){var r=l++;i=n||(n=g()),e=k.bind(null,i,r,!1),s=k.bind(null,i,r,!0)}else i=g(),e=function(t,e){var s=e.css,i=e.media,r=e.sourceMap;i&&t.setAttribute("media",i);d.ssrId&&t.setAttribute(u,e.id);r&&(s+="\n/*# sourceURL="+r.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");if(t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}.bind(null,i),s=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else s()}}var y,v=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function k(t,e,s,i){var r=s?"":i.css;if(t.styleSheet)t.styleSheet.cssText=v(e,r);else{var a=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}}]).default});